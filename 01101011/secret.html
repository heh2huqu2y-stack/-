<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù…ÙˆØ§Ù‚Ø¹ÙŠ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Cairo',sans-serif;}
body{
  background: linear-gradient(to bottom right, #667eea, #764ba2);
  padding:40px 20px 80px 20px;
  color:#fff;
}

/* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ø³Ù… */
.profile-card{
  text-align:center;
  background: rgba(255,255,255,0.1);
  color:#fff;
  padding:30px 50px;
  border-radius:25px;
  box-shadow:0 10px 30px rgba(0,0,0,0.5);
  margin-bottom:40px;
  backdrop-filter: blur(10px);
  transition: transform 0.3s, box-shadow 0.3s;
}
.profile-card:hover{
  transform: translateY(-5px);
  box-shadow:0 15px 35px rgba(0,0,0,0.6);
}
.profile-card h1{
  font-size:36px;
  font-weight:800;
  margin-bottom:10px;
  letter-spacing:1.5px;
  text-shadow:2px 2px 8px rgba(0,0,0,0.4);
}
.profile-card p{
  font-size:18px;
  opacity:0.9;
}

/* Ø£ÙŠÙ‚ÙˆÙ†Ø© Drawer Ø£Ø³ÙÙ„ Ø§Ù„ØµÙØ­Ø© */
.drawer-btn{
  position:fixed;
  bottom:20px;
  left:50%;
  transform: translateX(-50%);
  background: linear-gradient(45deg,#ff758c,#ff7eb3);
  color:#fff;
  width:70px;height:70px;
  border-radius:50%;border:none;
  font-size:36px;
  display:flex;justify-content:center;align-items:center;
  cursor:pointer;
  box-shadow:0 8px 20px rgba(0,0,0,0.4);
  transition: transform 0.3s, box-shadow 0.3s;
  z-index:1000;
}
.drawer-btn:hover{
  transform: translateX(-50%) scale(1.15);
  box-shadow:0 12px 25px rgba(0,0,0,0.6);
}

/* Drawer Sidebar */
.drawer{
  position:fixed;top:0;left:-260px;width:260px;height:100%;
  background: rgba(255,255,255,0.15);
  box-shadow:2px 0 15px rgba(0,0,0,0.5);
  padding:25px;backdrop-filter: blur(10px);
  transition:0.3s;z-index:1500;
  border-radius:0 20px 20px 0;
}
.drawer.show{left:0;}
.drawer h3{margin-bottom:25px;color:#fff;font-size:22px;text-shadow:1px 1px 5px rgba(0,0,0,0.5);}
.drawer button{
  display:block;width:100%;padding:12px;margin:12px 0;
  border:none;border-radius:12px;background: linear-gradient(45deg,#667eea,#764ba2);
  color:#fff;cursor:pointer;font-weight:bold;
  transition:0.3s;
}
.drawer button:hover{opacity:0.9;}
.drawer .exit-btn{background: linear-gradient(45deg,#ff758c,#ff7eb3);}

/* Ø§Ù„Ù…Ø¹Ø±Ø¶ */
.gallery,.trash-gallery{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:25px;
  margin-top:20px;
}
.item{
  position:relative;
  border-radius:20px;
  overflow:hidden;
  box-shadow:0 8px 30px rgba(0,0,0,0.5);
  transition: transform 0.3s, box-shadow 0.3s;
}
.item:hover{
  transform: scale(1.05);
  box-shadow:0 12px 40px rgba(0,0,0,0.7);
}
img,video{width:100%;display:block;border-radius:20px;}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù†Ø§ØµØ± */
.btns-container{
  position:absolute;top:10px;right:10px;display:flex;gap:5px;
}
.hide-btn,.delete-btn,.restore-btn,.del-final-btn{
  background: linear-gradient(45deg,#ff758c,#ff7eb3);
  color:#fff;border:none;border-radius:50%;
  width:40px;height:40px;cursor:pointer;
  display:flex;align-items:center;justify-content:center;font-size:18px;
  transition: transform 0.3s, background 0.3s;
}
.hide-btn:hover,.delete-btn:hover,.restore-btn:hover,.del-final-btn:hover{
  transform: scale(1.2);
  background: linear-gradient(45deg,#ff7eb3,#ff758c);
}

/* Ø³Ù„Ø© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ§Øª */
#trashModal{
  position:fixed;top:0;left:0;right:0;bottom:0;
  background:rgba(0,0,0,0.8);
  display:none;justify-content:center;align-items:center;
  z-index:2000;
}
#trashModal .modal-content{
  background: rgba(255,255,255,0.1);
  padding:35px; border-radius:25px;
  box-shadow:0 10px 35px rgba(0,0,0,0.7);
  text-align:center;
  transition: transform 0.3s, opacity 0.3s;
  width:90%; max-width:700px;
  backdrop-filter: blur(12px);
}
#trashModal .trash-gallery .item{
  border-radius:15px;
  overflow:hidden;
  box-shadow:0 5px 25px rgba(0,0,0,0.5);
  transition: transform 0.3s;
}
#trashModal .trash-gallery .item:hover{transform:scale(1.05);}
#trashModal button{
  background: linear-gradient(45deg,#ff758c,#ff7eb3);
  padding:12px 25px;border:none;border-radius:12px;
  color:#fff;font-weight:bold;cursor:pointer;
  transition: transform 0.3s, box-shadow 0.3s;
}
#trashModal button:hover{
  transform: scale(1.05);
  box-shadow:0 8px 20px rgba(0,0,0,0.6);
}

/* Responsive adjustments */
@media (max-width:480px){
  body{padding:20px 10px 100px 10px;}
  .profile-card h1{font-size:28px;}
  .profile-card p{font-size:16px;}
  .drawer-btn{width:60px;height:60px;font-size:28px;bottom:15px;}
  .item{border-radius:15px;}
  .btns-container button{width:35px;height:35px;font-size:16px;}
}
</style>
</head>
<body>

<!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ø³Ù… -->
<div class="profile-card">
  <h1>Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ù…Ø¯ Ø£ÙŠÙ…Ù† Ø£Ø­Ù…Ø¯ ÙØ±Ø§Ø­Ø§Øª</h1>
  <p>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù…ÙˆØ§Ù‚Ø¹ÙŠ</p>
</div>

<!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Drawer -->
<button class="drawer-btn" onclick="toggleDrawer()">â˜°</button>

<!-- Drawer -->
<div class="drawer" id="drawer">
  <h3>Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h3>
  <button onclick="openFileDirect('img')">Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©</button>
  <button onclick="openFileDirect('video')">Ø¥Ø¶Ø§ÙØ© ÙÙŠØ¯ÙŠÙˆ</button>
  <button onclick="openTrash()">Ø³Ù„Ø© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ§Øª</button>
  <button class="exit-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
</div>

<!-- Ø³Ù„Ø© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ§Øª -->
<div id="trashModal">
  <div class="modal-content">
    <h3>Ø³Ù„Ø© Ø§Ù„Ù…Ø­Ø°ÙˆÙØ§Øª</h3>
    <div class="trash-gallery" id="trashGallery"></div>
    <br>
    <button onclick="closeTrash()">Ø¥ØºÙ„Ø§Ù‚</button>
  </div>
</div>

<!-- Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†Ø§ØµØ± -->
<div class="gallery" id="gallery"></div>

<script>
if(localStorage.getItem("auth")!=="true"){window.location.href="login.html";}

const drawer=document.getElementById('drawer');
const gallery=document.getElementById('gallery');
const trashModal=document.getElementById('trashModal');
const trashGallery=document.getElementById('trashGallery');

let contentList=JSON.parse(localStorage.getItem('contentList')||'[]');
let trashList=JSON.parse(localStorage.getItem('trashList')||'[]');
let currentType='';

function toggleDrawer(){ drawer.classList.toggle('show'); }

function openFileDirect(type){
  currentType = type;
  toggleDrawer();
  const hiddenInput = document.createElement('input');
  hiddenInput.type = 'file';
  hiddenInput.accept = type==='img'?'image/*':'video/*';
  hiddenInput.style.display='none';
  hiddenInput.onchange=function(){
    const file=this.files[0];
    if(!file) return;
    const reader=new FileReader();
    reader.onload=function(e){
      contentList.push({type:currentType,src:e.target.result,hidden:false});
      localStorage.setItem('contentList',JSON.stringify(contentList));
      renderGallery();
    }
    reader.readAsDataURL(file);
  }
  document.body.appendChild(hiddenInput);
  hiddenInput.click();
  document.body.removeChild(hiddenInput);
}

function renderGallery(){
  gallery.innerHTML='';
  contentList.forEach((item,index)=>{
    const div=document.createElement('div'); div.className='item'; div.dataset.index=index;
    if(item.type==='img'){ const img=document.createElement('img'); img.src=item.src; div.appendChild(img);}
    else{ const video=document.createElement('video'); video.controls=true; const source=document.createElement('source'); source.src=item.src; source.type='video/mp4'; video.appendChild(source); div.appendChild(video);}
    const btns=document.createElement('div'); btns.className='btns-container';
    const hideBtn=document.createElement('button'); hideBtn.className='hide-btn'; hideBtn.textContent='Ã—'; hideBtn.title='Ø¥Ø®ÙØ§Ø¡/Ø¥Ø¸Ù‡Ø§Ø±'; hideBtn.onclick=()=>toggleHide(index,div); btns.appendChild(hideBtn);
    const deleteBtn=document.createElement('button'); deleteBtn.className='delete-btn'; deleteBtn.textContent='ğŸ—‘'; deleteBtn.title='Ù†Ù‚Ù„ Ù„Ù„Ø³Ù„Ø©'; deleteBtn.onclick=()=>moveToTrash(index); btns.appendChild(deleteBtn);
    div.appendChild(btns);
    if(item.hidden) div.style.display='none';
    gallery.appendChild(div);
  });
}

function toggleHide(index,div){ contentList[index].hidden=!contentList[index].hidden; div.style.display=contentList[index].hidden?'none':'block'; localStorage.setItem('contentList',JSON.stringify(contentList)); }
function moveToTrash(index){ if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù†Ù‚Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ± Ù„Ù„Ø³Ù„Ø©ØŸ')){ trashList.push(contentList[index]); contentList.splice(index,1); localStorage.setItem('contentList',JSON.stringify(contentList)); localStorage.setItem('trashList',JSON.stringify(trashList)); renderGallery(); } }

function openTrash(){ toggleDrawer(); renderTrash(); trashModal.style.display='flex'; }
function closeTrash(){ trashModal.style.display='none'; }
function renderTrash(){
  trashGallery.innerHTML='';
  trashList.forEach((item,index)=>{
    const div=document.createElement('div'); div.className='item'; div.dataset.index=index;
    if(item.type==='img'){ const img=document.createElement('img'); img.src=item.src; div.appendChild(img);}
    else{ const video=document.createElement('video'); video.controls=true; const source=document.createElement('source'); source.src=item.src; source.type='video/mp4'; video.appendChild(source); div.appendChild(video);}
    const btns=document.createElement('div'); btns.className='btns-container';
    const restoreBtn=document.createElement('button'); restoreBtn.className='restore-btn'; restoreBtn.textContent='â¤´'; restoreBtn.title='Ø§Ø³ØªØ¹Ø§Ø¯Ø©'; restoreBtn.onclick=()=>restoreItem(index); btns.appendChild(restoreBtn);
    const delFinalBtn=document.createElement('button'); delFinalBtn.className='del-final-btn'; delFinalBtn.textContent='ğŸ—‘'; delFinalBtn.title='Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ'; delFinalBtn.onclick=()=>deleteFinal(index); btns.appendChild(delFinalBtn);
    div.appendChild(btns); trashGallery.appendChild(div);
  });
}

function restoreItem(index){ contentList.push(trashList[index]); trashList.splice(index,1); localStorage.setItem('contentList',JSON.stringify(contentList)); localStorage.setItem('trashList',JSON.stringify(trashList)); renderGallery(); renderTrash(); }
function deleteFinal(index){ if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø­Ø°Ù Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ')){ trashList.splice(index,1); localStorage.setItem('trashList',JSON.stringify(trashList)); renderTrash(); } }

function logout(){ if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')){ localStorage.removeItem('auth'); window.location.href="login.html"; } }

renderGallery();
</script>
</body>
</html>
